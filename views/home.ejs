<!-- <html>
    <head>
     
    </head>
    <body>
        <%- include('_header'); %>
     <h1>
         Codeial Web App
         <%= title%>
     </h1>
     <%- include('_footer'); %>




    </body>
</html> -->
<link rel="stylesheet" href="/css/home.css">
<h1 id="main-heading">
        Codeial Web App
        <%= title%>
 </h1>
 <section id="feed-posts">
     <h3>Posts</h3>
     <!-- if condition is added for authentication purpose -->
     <!-- one can't see the form if he is not logged in -->
     <% if(locals.user){ %>
     <form action="/posts/create" id="new-post-form" method="POST">
       <textarea name="content" cols="30" rows="3" placeholder="What's on your mind..??"></textarea>
       <input type="submit" value="Post">


    </form>
    <% } %>
 <div id="posts-list-container">
     <ul>
 <% for(var i of posts ){ %>
        <li>
            <!-- here user is the field in post schema and 
            name is one of its property.  -->
            <p><%= i.user.name %></p>
            <!-- <p><%= i.user.createdAt %></p> -->
            <p><%= i.content %></p>
            <div id="post-comments">
                <!-- if condition is added for authentication purpose -->
                <% if(locals.user){ %>

                <form action="/comments/create" method="POST">
                    <input type="text" name="content" placeholder="Type here to add a comment...">
                    <!--  sending the id of the post below which comment needs to be added -->
                    <input type="hidden" name="post" value="<%= i._id %>">
                    <input type="submit" value="Add Comment">

                </form>

                <% } %>
            </div>
            
        </li>





<% }  %>
     </ul>
 </div>
 </section>
